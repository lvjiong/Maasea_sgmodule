// Build: 12/11/2025, 5:18:10 AM
(()=>{var qt=Object.defineProperty;var Xt=(t,e,n)=>e in t?qt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var G=(t,e,n)=>(Xt(t,typeof e!="symbol"?e+"":e,n),n);(function(t){function e(){}function n(){}var r=String.fromCharCode,s={}.toString,o=s.call(t.SharedArrayBuffer),i=s(),a=t.Uint8Array,c=a||Array,d=a?ArrayBuffer:c,l=d.isView||function(T){return T&&"length"in T},p=s.call(d.prototype);d=n.prototype;var g=t.TextEncoder,f=new(a?Uint16Array:c)(32);e.prototype.decode=function(T){if(!l(T)){var x=s.call(T);if(x!==p&&x!==o&&x!==i)throw TypeError("Failed to execute 'decode' on 'TextDecoder': The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");T=a?new c(T):T||[]}for(var y=x="",b=0,w=T.length|0,Q=w-32|0,N,I,R=0,_=0,M,B=0,O=-1;b<w;){for(N=b<=Q?32:w-b|0;B<N;b=b+1|0,B=B+1|0){switch(I=T[b]&255,I>>4){case 15:if(M=T[b=b+1|0]&255,M>>6!==2||247<I){b=b-1|0;break}R=(I&7)<<6|M&63,_=5,I=256;case 14:M=T[b=b+1|0]&255,R<<=6,R|=(I&15)<<6|M&63,_=M>>6===2?_+4|0:24,I=I+256&768;case 13:case 12:M=T[b=b+1|0]&255,R<<=6,R|=(I&31)<<6|M&63,_=_+7|0,b<w&&M>>6===2&&R>>_&&1114112>R?(I=R,R=R-65536|0,0<=R&&(O=(R>>10)+55296|0,I=(R&1023)+56320|0,31>B?(f[B]=O,B=B+1|0,O=-1):(M=O,O=I,I=M))):(I>>=8,b=b-I-1|0,I=65533),R=_=0,N=b<=Q?32:w-b|0;default:f[B]=I;continue;case 11:case 10:case 9:case 8:}f[B]=65533}if(y+=r(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15],f[16],f[17],f[18],f[19],f[20],f[21],f[22],f[23],f[24],f[25],f[26],f[27],f[28],f[29],f[30],f[31]),32>B&&(y=y.slice(0,B-32|0)),b<w){if(f[0]=O,B=~O>>>31,O=-1,y.length<x.length)continue}else O!==-1&&(y+=r(O));x+=y,y=""}return x},d.encode=function(T){T=T===void 0?"":""+T;var x=T.length|0,y=new c((x<<1)+8|0),b,w=0,Q=!a;for(b=0;b<x;b=b+1|0,w=w+1|0){var N=T.charCodeAt(b)|0;if(127>=N)y[w]=N;else{if(2047>=N)y[w]=192|N>>6;else{e:{if(55296<=N)if(56319>=N){var I=T.charCodeAt(b=b+1|0)|0;if(56320<=I&&57343>=I){if(N=(N<<10)+I-56613888|0,65535<N){y[w]=240|N>>18,y[w=w+1|0]=128|N>>12&63,y[w=w+1|0]=128|N>>6&63,y[w=w+1|0]=128|N&63;continue}break e}N=65533}else 57343>=N&&(N=65533);!Q&&b<<1<w&&b<<1<(w-7|0)&&(Q=!0,I=new c(3*x),I.set(y),y=I)}y[w]=224|N>>12,y[w=w+1|0]=128|N>>6&63}y[w=w+1|0]=128|N&63}}return a?y.subarray(0,w):y.slice(0,w)},g||(t.TextDecoder=e,t.TextEncoder=n)})(globalThis);function S(t,e){if(!t)throw new Error(e)}var Wt=34028234663852886e22,jt=-34028234663852886e22,Kt=4294967295,zt=2147483647,Qt=-2147483648;function q(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>zt||t<Qt)throw new Error("invalid int 32: "+t)}function H(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>Kt||t<0)throw new Error("invalid uint 32: "+t)}function se(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>Wt||t<jt))throw new Error("invalid float 32: "+t)}var je=Symbol("@bufbuild/protobuf/enum-type");function Ke(t){let e=t[je];return S(e,"missing enum type on enum object"),e}function Re(t,e,n,r){t[je]=Be(e,n.map(s=>({no:s.no,name:s.name,localName:t[s.no]})),r)}function Be(t,e,n){let r=Object.create(null),s=Object.create(null),o=[];for(let i of e){let a=Qe(i);o.push(a),r[i.name]=a,s[i.no]=a}return{typeName:t,values:o,findName(i){return r[i]},findNumber(i){return s[i]}}}function ze(t,e,n){let r={};for(let s of e){let o=Qe(s);r[o.localName]=o.no,r[o.no]=o.localName}return Re(r,t,e,n),r}function Qe(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}var E=class{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){let r=this.getType(),s=r.runtime.bin,o=s.makeReadOptions(n);return s.readMessage(this,o.readerFactory(e),e.byteLength,o),this}fromJson(e,n){let r=this.getType(),s=r.runtime.json,o=s.makeReadOptions(n);return s.readMessage(r,e,o,this),this}fromJsonString(e,n){let r;try{r=JSON.parse(e)}catch(s){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${s instanceof Error?s.message:String(s)}`)}return this.fromJson(r,n)}toBinary(e){let n=this.getType(),r=n.runtime.bin,s=r.makeWriteOptions(e),o=s.writerFactory();return r.writeMessage(this,o,s),o.finish()}toJson(e){let n=this.getType(),r=n.runtime.json,s=r.makeWriteOptions(e);return r.writeMessage(this,s)}toJsonString(e){var n;let r=this.toJson(e);return JSON.stringify(r,null,(n=e?.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}};function He(t,e,n,r){var s;let o=(s=r?.localName)!==null&&s!==void 0?s:e.substring(e.lastIndexOf(".")+1),i={[o]:function(a){t.util.initFields(this),t.util.initPartial(a,this)}}[o];return Object.setPrototypeOf(i.prototype,new E),Object.assign(i,{runtime:t,typeName:e,fields:t.util.newFieldList(n),fromBinary(a,c){return new i().fromBinary(a,c)},fromJson(a,c){return new i().fromJson(a,c)},fromJsonString(a,c){return new i().fromJsonString(a,c)},equals(a,c){return t.util.equals(i,a,c)}}),i}var u;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(u||(u={}));var C;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"})(C||(C={}));function et(){let t=0,e=0;for(let r=0;r<28;r+=7){let s=this.buf[this.pos++];if(t|=(s&127)<<r,!(s&128))return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,!(n&128))return this.assertBounds(),[t,e];for(let r=3;r<=31;r+=7){let s=this.buf[this.pos++];if(e|=(s&127)<<r,!(s&128))return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function ie(t,e,n){for(let o=0;o<28;o=o+7){let i=t>>>o,a=!(!(i>>>7)&&e==0),c=(a?i|128:i)&255;if(n.push(c),!a)return}let r=t>>>28&15|(e&7)<<4,s=!!(e>>3);if(n.push((s?r|128:r)&255),!!s){for(let o=3;o<31;o=o+7){let i=e>>>o,a=!!(i>>>7),c=(a?i|128:i)&255;if(n.push(c),!a)return}n.push(e>>>31&1)}}var oe=4294967296;function Me(t){let e=t[0]==="-";e&&(t=t.slice(1));let n=1e6,r=0,s=0;function o(i,a){let c=Number(t.slice(i,a));s*=n,r=r*n+c,r>=oe&&(s=s+(r/oe|0),r=r%oe)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),e?nt(r,s):Oe(r,s)}function tt(t,e){let n=Oe(t,e),r=n.hi&2147483648;r&&(n=nt(n.lo,n.hi));let s=Ue(n.lo,n.hi);return r?"-"+s:s}function Ue(t,e){if({lo:t,hi:e}=Ht(t,e),e<=2097151)return String(oe*e+t);let n=t&16777215,r=(t>>>24|e<<8)&16777215,s=e>>16&65535,o=n+r*6777216+s*6710656,i=r+s*8147497,a=s*2,c=1e7;return o>=c&&(i+=Math.floor(o/c),o%=c),i>=c&&(a+=Math.floor(i/c),i%=c),a.toString()+Ze(i)+Ze(o)}function Ht(t,e){return{lo:t>>>0,hi:e>>>0}}function Oe(t,e){return{lo:t|0,hi:e|0}}function nt(t,e){return e=~e,t?t=~t+1:e+=1,Oe(t,e)}var Ze=t=>{let e=String(t);return"0000000".slice(e.length)+e};function Ce(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function rt(){let t=this.buf[this.pos++],e=t&127;if(!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,!(t&128))return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;t&128&&n<10;n++)t=this.buf[this.pos++];if(t&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function Zt(){let t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||typeof process.env!="object"||process.env.BUF_BIGINT_DISABLE!=="1")){let s=BigInt("-9223372036854775808"),o=BigInt("9223372036854775807"),i=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(c){let d=typeof c=="bigint"?c:BigInt(c);if(d>o||d<s)throw new Error(`int64 invalid: ${c}`);return d},uParse(c){let d=typeof c=="bigint"?c:BigInt(c);if(d>a||d<i)throw new Error(`uint64 invalid: ${c}`);return d},enc(c){return t.setBigInt64(0,this.parse(c),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(c){return t.setBigInt64(0,this.uParse(c),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(c,d){return t.setInt32(0,c,!0),t.setInt32(4,d,!0),t.getBigInt64(0,!0)},uDec(c,d){return t.setInt32(0,c,!0),t.setInt32(4,d,!0),t.getBigUint64(0,!0)}}}let n=s=>S(/^-?[0-9]+$/.test(s),`int64 invalid: ${s}`),r=s=>S(/^[0-9]+$/.test(s),`uint64 invalid: ${s}`);return{zero:"0",supported:!1,parse(s){return typeof s!="string"&&(s=s.toString()),n(s),s},uParse(s){return typeof s!="string"&&(s=s.toString()),r(s),s},enc(s){return typeof s!="string"&&(s=s.toString()),n(s),Me(s)},uEnc(s){return typeof s!="string"&&(s=s.toString()),r(s),Me(s)},dec(s,o){return tt(s,o)},uDec(s,o){return Ue(s,o)}}}var F=Zt();var k;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(k||(k={}));var ae=class{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let s=0;s<this.chunks.length;s++)e+=this.chunks[s].length;let n=new Uint8Array(e),r=0;for(let s=0;s<this.chunks.length;s++)n.set(this.chunks[s],r),r+=this.chunks[s].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(H(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return q(e),Ce(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){se(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){H(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){q(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return q(e),e=(e<<1^e>>31)>>>0,Ce(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),s=F.enc(e);return r.setInt32(0,s.lo,!0),r.setInt32(4,s.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),s=F.uEnc(e);return r.setInt32(0,s.lo,!0),r.setInt32(4,s.hi,!0),this.raw(n)}int64(e){let n=F.enc(e);return ie(n.lo,n.hi,this.buf),this}sint64(e){let n=F.enc(e),r=n.hi>>31,s=n.lo<<1^r,o=(n.hi<<1|n.lo>>>31)^r;return ie(s,o,this.buf),this}uint64(e){let n=F.uEnc(e);return ie(n.lo,n.hi,this.buf),this}},ce=class{constructor(e,n){this.varint64=et,this.uint32=rt,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,r=e&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(e){let n=this.pos;switch(e){case k.Varint:for(;this.buf[this.pos++]&128;);break;case k.Bit64:this.pos+=4;case k.Bit32:this.pos+=4;break;case k.LengthDelimited:let r=this.uint32();this.pos+=r;break;case k.StartGroup:let s;for(;(s=this.tag()[1])!==k.EndGroup;)this.skip(s);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return F.dec(...this.varint64())}uint64(){return F.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),r=-(e&1);return e=(e>>>1|(n&1)<<31)^r,n=n>>>1^r,F.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return F.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return F.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}};function P(t,e,n){if(e===n)return!0;if(t==u.BYTES){if(!(e instanceof Uint8Array)||!(n instanceof Uint8Array)||e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}switch(t){case u.UINT64:case u.FIXED64:case u.INT64:case u.SFIXED64:case u.SINT64:return e==n}return!1}function Y(t,e){switch(t){case u.BOOL:return!1;case u.UINT64:case u.FIXED64:case u.INT64:case u.SFIXED64:case u.SINT64:return e==0?F.zero:"0";case u.DOUBLE:case u.FLOAT:return 0;case u.BYTES:return new Uint8Array(0);case u.STRING:return"";default:return 0}}function Ae(t,e){let n=e===void 0,r=k.Varint,s=e===0;switch(t){case u.STRING:s=n||!e.length,r=k.LengthDelimited;break;case u.BOOL:s=e===!1;break;case u.DOUBLE:r=k.Bit64;break;case u.FLOAT:r=k.Bit32;break;case u.INT64:s=n||e==0;break;case u.UINT64:s=n||e==0;break;case u.FIXED64:s=n||e==0,r=k.Bit64;break;case u.BYTES:s=n||!e.byteLength,r=k.LengthDelimited;break;case u.FIXED32:r=k.Bit32;break;case u.SFIXED32:r=k.Bit32;break;case u.SFIXED64:s=n||e==0,r=k.Bit64;break;case u.SINT64:s=n||e==0;break}let o=u[t].toLowerCase();return[r,o,n||s]}function st(t,e,n,r){let s;return{typeName:e,extendee:n,get field(){if(!s){let o=typeof r=="function"?r():r;o.name=e.split(".").pop(),o.jsonName=`[${e}]`,s=t.util.newFieldList([o]).list()[0]}return s},runtime:t}}function ue(t){let e=t.field.localName,n=Object.create(null);return n[e]=en(t),[n,()=>n[e]]}function en(t){let e=t.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return Y(e.T,e.L);case"message":let n=e.T,r=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function ot(t,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let n=t.length-1;n>=0;--n)if(t[n].no==e.no)return[t[n]];return[]}return t.filter(n=>n.no===e.no)}function it(t,e,n,r){return{syntax:t,json:e,bin:n,util:r,makeMessageType(s,o,i){return He(this,s,o,i)},makeEnum:ze,makeEnumType:Be,getEnumType:Ke,makeExtension(s,o,i){return st(this,s,o,i)}}}function de(t,e){return e instanceof E||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}var ns={"google.protobuf.DoubleValue":u.DOUBLE,"google.protobuf.FloatValue":u.FLOAT,"google.protobuf.Int64Value":u.INT64,"google.protobuf.UInt64Value":u.UINT64,"google.protobuf.Int32Value":u.INT32,"google.protobuf.UInt32Value":u.UINT32,"google.protobuf.BoolValue":u.BOOL,"google.protobuf.StringValue":u.STRING,"google.protobuf.BytesValue":u.BYTES};var X=Symbol("@bufbuild/protobuf/unknown-fields"),at={readUnknownFields:!0,readerFactory:t=>new ce(t)},ct={writeUnknownFields:!0,writerFactory:()=>new ae};function tn(t){return t?Object.assign(Object.assign({},at),t):at}function nn(t){return t?Object.assign(Object.assign({},ct),t):ct}function dt(){return{makeReadOptions:tn,makeWriteOptions:nn,listUnknownFields(t){var e;return(e=t[X])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[X]},writeUnknownFields(t,e){let r=t[X];if(r)for(let s of r)e.tag(s.no,s.wireType).raw(s.data)},onUnknownField(t,e,n,r){let s=t;Array.isArray(s[X])||(s[X]=[]),s[X].push({no:e,wireType:n,data:r})},readMessage(t,e,n,r,s){let o=t.getType(),i=s?e.len:e.pos+n,a,c;for(;e.pos<i&&([a,c]=e.tag(),c!=k.EndGroup);){let d=o.fields.find(a);if(!d){let l=e.skip(c);r.readUnknownFields&&this.onUnknownField(t,a,c,l);continue}ut(t,e,d,c,r)}if(s&&(c!=k.EndGroup||a!==n))throw new Error("invalid end group tag")},readField:ut}}function ut(t,e,n,r,s){let{repeated:o,localName:i}=n;switch(n.oneof&&(t=t[n.oneof.localName],t.case!=i&&delete t.value,t.case=i,i="value"),n.kind){case"scalar":case"enum":let a=n.kind=="enum"?u.INT32:n.T,c=le;if(n.kind=="scalar"&&n.L>0&&(c=sn),o){let g=t[i];if(r==k.LengthDelimited&&a!=u.STRING&&a!=u.BYTES){let T=e.uint32()+e.pos;for(;e.pos<T;)g.push(c(e,a))}else g.push(c(e,a))}else t[i]=c(e,a);break;case"message":let d=n.T;o?t[i].push(me(e,new d,s,n)):t[i]instanceof E?me(e,t[i],s,n):(t[i]=me(e,new d,s,n),d.fieldWrapper&&!n.oneof&&!n.repeated&&(t[i]=d.fieldWrapper.unwrapField(t[i])));break;case"map":let[l,p]=rn(n,e,s);t[i][l]=p;break}}function me(t,e,n,r){let s=e.getType().runtime.bin,o=r?.delimited;return s.readMessage(e,t,o?r?.no:t.uint32(),n,o),e}function rn(t,e,n){let r=e.uint32(),s=e.pos+r,o,i;for(;e.pos<s;){let[a]=e.tag();switch(a){case 1:o=le(e,t.K);break;case 2:switch(t.V.kind){case"scalar":i=le(e,t.V.T);break;case"enum":i=e.int32();break;case"message":i=me(e,new t.V.T,n,void 0);break}break}}if(o===void 0){let a=Y(t.K,C.BIGINT);o=t.K==u.BOOL?a.toString():a}if(typeof o!="string"&&typeof o!="number"&&(o=o.toString()),i===void 0)switch(t.V.kind){case"scalar":i=Y(t.V.T,C.BIGINT);break;case"enum":i=0;break;case"message":i=new t.V.T;break}return[o,i]}function sn(t,e){let n=le(t,e);return typeof n=="bigint"?n.toString():n}function le(t,e){switch(e){case u.STRING:return t.string();case u.BOOL:return t.bool();case u.DOUBLE:return t.double();case u.FLOAT:return t.float();case u.INT32:return t.int32();case u.INT64:return t.int64();case u.UINT64:return t.uint64();case u.FIXED64:return t.fixed64();case u.BYTES:return t.bytes();case u.FIXED32:return t.fixed32();case u.SFIXED32:return t.sfixed32();case u.SFIXED64:return t.sfixed64();case u.SINT64:return t.sint64();case u.UINT32:return t.uint32();case u.SINT32:return t.sint32()}}function mt(t,e,n,r,s){t.tag(n.no,k.LengthDelimited),t.fork();let o=r;switch(n.K){case u.INT32:case u.FIXED32:case u.UINT32:case u.SFIXED32:case u.SINT32:o=Number.parseInt(r);break;case u.BOOL:S(r=="true"||r=="false"),o=r=="true";break}switch(W(t,n.K,1,o,!0),n.V.kind){case"scalar":W(t,n.V.T,2,s,!0);break;case"enum":W(t,u.INT32,2,s,!0);break;case"message":t.tag(2,k.LengthDelimited).bytes(s.toBinary(e));break}t.join()}function Le(t,e,n,r){let s=de(n.T,r);n?.delimited?t.tag(n.no,k.StartGroup).raw(s.toBinary(e)).tag(n.no,k.EndGroup):t.tag(n.no,k.LengthDelimited).bytes(s.toBinary(e))}function W(t,e,n,r,s){let[o,i,a]=Ae(e,r);(!a||s)&&t.tag(n,o)[i](r)}function lt(t,e,n,r){if(!r.length)return;t.tag(n,k.LengthDelimited).fork();let[,s]=Ae(e);for(let o=0;o<r.length;o++)t[s](r[o]);t.join()}function pt(){return Object.assign(Object.assign({},dt()),{writeField:ft,writeMessage(t,e,n){let r=t.getType();for(let s of r.fields.byNumber()){let o,i=s.localName;if(s.oneof){let a=t[s.oneof.localName];if(a.case!==i)continue;o=a.value}else o=t[i];ft(s,o,e,n)}return n.writeUnknownFields&&this.writeUnknownFields(t,e),e}})}function ft(t,e,n,r){let s=t.repeated;switch(t.kind){case"scalar":case"enum":let o=t.kind=="enum"?u.INT32:t.T;if(s)if(t.packed)lt(n,o,t.no,e);else for(let i of e)W(n,o,t.no,i,!0);else e!==void 0&&W(n,o,t.no,e,!!t.oneof||t.opt);break;case"message":if(s)for(let i of e)Le(n,r,t,i);else e!==void 0&&Le(n,r,t,e);break;case"map":for(let[i,a]of Object.entries(e))mt(n,r,t,i,a);break}}var v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),fe=[];for(let t=0;t<v.length;t++)fe[v[t].charCodeAt(0)]=t;fe["-".charCodeAt(0)]=v.indexOf("+");fe["_".charCodeAt(0)]=v.indexOf("/");var j={dec(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),r=0,s=0,o,i=0;for(let a=0;a<t.length;a++){if(o=fe[t.charCodeAt(a)],o===void 0)switch(t[a]){case"=":s=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(s){case 0:i=o,s=1;break;case 1:n[r++]=i<<2|(o&48)>>4,i=o,s=2;break;case 2:n[r++]=(i&15)<<4|(o&60)>>2,i=o,s=3;break;case 3:n[r++]=(i&3)<<6|o,s=0;break}}if(s==1)throw Error("invalid base64 string.");return n.subarray(0,r)},enc(t){let e="",n=0,r,s=0;for(let o=0;o<t.length;o++)switch(r=t[o],n){case 0:e+=v[r>>2],s=(r&3)<<4,n=1;break;case 1:e+=v[s|r>>4],s=(r&15)<<2,n=2;break;case 2:e+=v[s|r>>6],e+=v[r&63],n=0;break}return n&&(e+=v[s],e+="=",n==1&&(e+="=")),e}};function gt(t,e,n){ht(e,t);let r=e.runtime.bin.makeReadOptions(n),s=ot(t.getType().runtime.bin.listUnknownFields(t),e.field),[o,i]=ue(e);for(let a of s)e.runtime.bin.readField(o,r.readerFactory(a.data),e.field,a.wireType,r);return i()}function Tt(t,e,n,r){ht(e,t);let s=e.runtime.bin.makeReadOptions(r),o=e.runtime.bin.makeWriteOptions(r);if(Pe(t,e)){let d=t.getType().runtime.bin.listUnknownFields(t).filter(l=>l.no!=e.field.no);t.getType().runtime.bin.discardUnknownFields(t);for(let l of d)t.getType().runtime.bin.onUnknownField(t,l.no,l.wireType,l.data)}let i=o.writerFactory(),a=e.field;!a.opt&&!a.repeated&&(a.kind=="enum"||a.kind=="scalar")&&(a=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(a,n,i,o);let c=s.readerFactory(i.finish());for(;c.pos<c.len;){let[d,l]=c.tag(),p=c.skip(l);t.getType().runtime.bin.onUnknownField(t,d,l,p)}}function Pe(t,e){let n=t.getType();return e.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(t).find(r=>r.no==e.field.no)}function ht(t,e){S(t.extendee.typeName==e.getType().typeName,`extension ${t.typeName} can only be applied to message ${t.extendee.typeName}`)}var yt={ignoreUnknownFields:!1},bt={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function on(t){return t?Object.assign(Object.assign({},yt),t):yt}function an(t){return t?Object.assign(Object.assign({},bt),t):bt}function xt(t,e){let n=e(cn,wt);return{makeReadOptions:on,makeWriteOptions:an,readMessage(r,s,o,i){if(s==null||Array.isArray(s)||typeof s!="object")throw new Error(`cannot decode message ${r.typeName} from JSON: ${A(s)}`);i=i??new r;let a=new Map,c=o.typeRegistry;for(let[d,l]of Object.entries(s)){let p=r.fields.findJsonName(d);if(p){if(p.oneof){if(l===null&&p.kind=="scalar")continue;let g=a.get(p.oneof);if(g!==void 0)throw new Error(`cannot decode message ${r.typeName} from JSON: multiple keys for oneof "${p.oneof.name}" present: "${g}", "${d}"`);a.set(p.oneof,d)}kt(i,l,p,o,r,t)}else{let g=!1;if(c?.findExtension&&d.startsWith("[")&&d.endsWith("]")){let f=c.findExtension(d.substring(1,d.length-1));if(f&&f.extendee.typeName==r.typeName){g=!0;let[T,x]=ue(f);kt(T,l,f.field,o,f,!0),Tt(i,f,x(),o)}}if(!g&&!o.ignoreUnknownFields)throw new Error(`cannot decode message ${r.typeName} from JSON: key "${d}" is unknown`)}}return i},writeMessage(r,s){let o=r.getType(),i={},a;try{for(let d of o.fields.byMember()){let l;if(d.kind=="oneof"){let p=r[d.localName];if(p.value===void 0)continue;if(a=d.findField(p.case),!a)throw"oneof case not found: "+p.case;l=n(a,p.value,s)}else a=d,l=n(a,r[a.localName],s);l!==void 0&&(i[s.useProtoFieldName?a.name:a.jsonName]=l)}let c=s.typeRegistry;if(c?.findExtensionFor)for(let d of o.runtime.bin.listUnknownFields(r)){let l=c.findExtensionFor(o.typeName,d.no);if(l&&Pe(r,l)){let p=gt(r,l,s),g=n(l.field,p,s);g!==void 0&&(i[l.field.jsonName]=g)}}}catch(c){let d=a?`cannot encode field ${o.typeName}.${a.name} to JSON`:`cannot encode message ${o.typeName} to JSON`,l=c instanceof Error?c.message:String(c);throw new Error(d+(l.length>0?`: ${l}`:""))}return i},readScalar:(r,s,o)=>Z(r,s,o,t),writeScalar:wt,debug:A}}function A(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":`"${t.split('"').join('\\"')}"`;default:return String(t)}}function kt(t,e,n,r,s,o){let i=n.localName;if(n.oneof){if(e===null&&n.kind=="scalar")return;t=t[n.oneof.localName]={case:i},i="value"}if(n.repeated){if(e===null)return;if(!Array.isArray(e))throw new Error(`cannot decode field ${s.typeName}.${n.name} from JSON: ${A(e)}`);let a=t[i];for(let c of e){if(c===null)throw new Error(`cannot decode field ${s.typeName}.${n.name} from JSON: ${A(c)}`);let d;switch(n.kind){case"message":d=n.T.fromJson(c,r);break;case"enum":if(d=ve(n.T,c,r.ignoreUnknownFields,!0),d===void 0)continue;break;case"scalar":try{d=Z(n.T,c,n.L,!0)}catch(l){let p=`cannot decode field ${s.typeName}.${n.name} from JSON: ${A(c)}`;throw l instanceof Error&&l.message.length>0&&(p+=`: ${l.message}`),new Error(p)}break}a.push(d)}}else if(n.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error(`cannot decode field ${s.typeName}.${n.name} from JSON: ${A(e)}`);let a=t[i];for(let[c,d]of Object.entries(e)){if(d===null)throw new Error(`cannot decode field ${s.typeName}.${n.name} from JSON: map value null`);let l;switch(n.V.kind){case"message":l=n.V.T.fromJson(d,r);break;case"enum":if(l=ve(n.V.T,d,r.ignoreUnknownFields,!0),l===void 0)continue;break;case"scalar":try{l=Z(n.V.T,d,C.BIGINT,!0)}catch(p){let g=`cannot decode map value for field ${s.typeName}.${n.name} from JSON: ${A(e)}`;throw p instanceof Error&&p.message.length>0&&(g+=`: ${p.message}`),new Error(g)}break}try{a[Z(n.K,n.K==u.BOOL?c=="true"?!0:c=="false"?!1:c:c,C.BIGINT,!0).toString()]=l}catch(p){let g=`cannot decode map key for field ${s.typeName}.${n.name} from JSON: ${A(e)}`;throw p instanceof Error&&p.message.length>0&&(g+=`: ${p.message}`),new Error(g)}}}else switch(n.kind){case"message":let a=n.T;if(e===null&&a.typeName!="google.protobuf.Value"){if(n.oneof)throw new Error(`cannot decode field ${s.typeName}.${n.name} from JSON: null is invalid for oneof field`);return}t[i]instanceof E?t[i].fromJson(e,r):(t[i]=a.fromJson(e,r),a.fieldWrapper&&!n.oneof&&(t[i]=a.fieldWrapper.unwrapField(t[i])));break;case"enum":let c=ve(n.T,e,r.ignoreUnknownFields,o);c!==void 0&&(t[i]=c);break;case"scalar":try{t[i]=Z(n.T,e,n.L,o)}catch(d){let l=`cannot decode field ${s.typeName}.${n.name} from JSON: ${A(e)}`;throw d instanceof Error&&d.message.length>0&&(l+=`: ${d.message}`),new Error(l)}break}}function Z(t,e,n,r){switch(t){case u.DOUBLE:case u.FLOAT:if(e===null)return r?0:void 0;if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;let s=Number(e);if(Number.isNaN(s)||!Number.isFinite(s))break;return t==u.FLOAT&&se(s),s;case u.INT32:case u.FIXED32:case u.SFIXED32:case u.SINT32:case u.UINT32:if(e===null)return r?0:void 0;let o;if(typeof e=="number"?o=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(o=Number(e)),o===void 0)break;return t==u.UINT32?H(o):q(o),o;case u.INT64:case u.SFIXED64:case u.SINT64:if(e===null)return r?F.zero:void 0;if(typeof e!="number"&&typeof e!="string")break;let i=F.parse(e);return n?i.toString():i;case u.FIXED64:case u.UINT64:if(e===null)return r?F.zero:void 0;if(typeof e!="number"&&typeof e!="string")break;let a=F.uParse(e);return n?a.toString():a;case u.BOOL:if(e===null)return r?!1:void 0;if(typeof e!="boolean")break;return e;case u.STRING:if(e===null)return r?"":void 0;if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case u.BYTES:if(e===null)return r?new Uint8Array(0):void 0;if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return j.dec(e)}throw new Error}function ve(t,e,n,r){if(e===null)return r?t.values[0].no:void 0;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":let s=t.findName(e);if(s||n)return s?.no;break}throw new Error(`cannot decode enum ${t.typeName} from JSON: ${A(e)}`)}function cn(t,e,n,r){var s;if(e===void 0)return e;if(!n&&t.values[0].no===e)return;if(r)return e;if(t.typeName=="google.protobuf.NullValue")return null;let o=t.findNumber(e);return(s=o?.name)!==null&&s!==void 0?s:e}function wt(t,e,n){if(e!==void 0)switch(t){case u.INT32:case u.SFIXED32:case u.SINT32:case u.FIXED32:case u.UINT32:return S(typeof e=="number"),e!=0||n?e:void 0;case u.FLOAT:case u.DOUBLE:return S(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e!==0||n?e:void 0;case u.STRING:return S(typeof e=="string"),e.length>0||n?e:void 0;case u.BOOL:return S(typeof e=="boolean"),e||n?e:void 0;case u.UINT64:case u.FIXED64:case u.INT64:case u.SFIXED64:case u.SINT64:return S(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),n||e!=0?e.toString(10):void 0;case u.BYTES:return S(e instanceof Uint8Array),n||e.byteLength>0?j.enc(e):void 0}}function It(){return xt(!0,(t,e)=>function(r,s,o){if(r.kind=="map"){let i={};switch(r.V.kind){case"scalar":for(let[c,d]of Object.entries(s)){let l=e(r.V.T,d,!0);S(l!==void 0),i[c.toString()]=l}break;case"message":for(let[c,d]of Object.entries(s))i[c.toString()]=d.toJson(o);break;case"enum":let a=r.V.T;for(let[c,d]of Object.entries(s)){S(d===void 0||typeof d=="number");let l=t(a,d,!0,o.enumAsInteger);S(l!==void 0),i[c.toString()]=l}break}return o.emitDefaultValues||Object.keys(i).length>0?i:void 0}else if(r.repeated){let i=[];switch(r.kind){case"scalar":for(let a=0;a<s.length;a++)i.push(e(r.T,s[a],!0));break;case"enum":for(let a=0;a<s.length;a++)i.push(t(r.T,s[a],!0,o.enumAsInteger));break;case"message":for(let a=0;a<s.length;a++)i.push(s[a].toJson(o));break}return o.emitDefaultValues||i.length>0?i:void 0}else{if(s===void 0)return;switch(r.kind){case"scalar":return e(r.T,s,!!r.oneof||r.opt||o.emitDefaultValues);case"enum":return t(r.T,s,!!r.oneof||r.opt||o.emitDefaultValues,o.enumAsInteger);case"message":return de(r.T,s).toJson(o)}}})}function Nt(){return{setEnumType:Re,initPartial(t,e){if(t===void 0)return;let n=e.getType();for(let r of n.fields.byMember()){let s=r.localName,o=e,i=t;if(i[s]!==void 0)switch(r.kind){case"oneof":let a=i[s].case;if(a===void 0)continue;let c=r.findField(a),d=i[s].value;c&&c.kind=="message"&&!(d instanceof c.T)?d=new c.T(d):c&&c.kind==="scalar"&&c.T===u.BYTES&&(d=ee(d)),o[s]={case:a,value:d};break;case"scalar":case"enum":let l=i[s];r.T===u.BYTES&&(l=r.repeated?l.map(ee):ee(l)),o[s]=l;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===u.BYTES)for(let[f,T]of Object.entries(i[s]))o[s][f]=ee(T);else Object.assign(o[s],i[s]);break;case"message":let g=r.V.T;for(let f of Object.keys(i[s])){let T=i[s][f];g.fieldWrapper||(T=new g(T)),o[s][f]=T}break}break;case"message":let p=r.T;if(r.repeated)o[s]=i[s].map(g=>g instanceof p?g:new p(g));else if(i[s]!==void 0){let g=i[s];p.fieldWrapper?p.typeName==="google.protobuf.BytesValue"?o[s]=ee(g):o[s]=g:o[s]=g instanceof p?g:new p(g)}break}}},equals(t,e,n){return e===n?!0:!e||!n?!1:t.fields.byMember().every(r=>{let s=e[r.localName],o=n[r.localName];if(r.repeated){if(s.length!==o.length)return!1;switch(r.kind){case"message":return s.every((i,a)=>r.T.equals(i,o[a]));case"scalar":return s.every((i,a)=>P(r.T,i,o[a]));case"enum":return s.every((i,a)=>P(u.INT32,i,o[a]))}throw new Error(`repeated cannot contain ${r.kind}`)}switch(r.kind){case"message":return r.T.equals(s,o);case"enum":return P(u.INT32,s,o);case"scalar":return P(r.T,s,o);case"oneof":if(s.case!==o.case)return!1;let i=r.findField(s.case);if(i===void 0)return!0;switch(i.kind){case"message":return i.T.equals(s.value,o.value);case"enum":return P(u.INT32,s.value,o.value);case"scalar":return P(i.T,s.value,o.value)}throw new Error(`oneof cannot contain ${i.kind}`);case"map":let a=Object.keys(s).concat(Object.keys(o));switch(r.V.kind){case"message":let c=r.V.T;return a.every(l=>c.equals(s[l],o[l]));case"enum":return a.every(l=>P(u.INT32,s[l],o[l]));case"scalar":let d=r.V.T;return a.every(l=>P(d,s[l],o[l]))}break}})},clone(t){let e=t.getType(),n=new e,r=n;for(let s of e.fields.byMember()){let o=t[s.localName],i;if(s.repeated)i=o.map(pe);else if(s.kind=="map"){i=r[s.localName];for(let[a,c]of Object.entries(o))i[a]=pe(c)}else s.kind=="oneof"?i=s.findField(o.case)?{case:o.case,value:pe(o.value)}:{case:void 0}:i=pe(o);r[s.localName]=i}return n}}}function pe(t){if(t===void 0)return t;if(t instanceof E)return t.clone();if(t instanceof Uint8Array){let e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function ee(t){return t instanceof Uint8Array?t:new Uint8Array(t)}var ge=class{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){let n={};for(let r of this.list())n[r.jsonName]=n[r.name]=r;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){let n={};for(let r of this.list())n[r.no]=r;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];let e=this.members,n;for(let r of this.list())r.oneof?r.oneof!==n&&(n=r.oneof,e.push(n)):e.push(r)}return this.members}};function De(t,e){let n=Et(t);return e?n:ln(mn(n))}function St(t){return De(t,!1)}var Ft=Et;function Et(t){let e=!1,n=[];for(let r=0;r<t.length;r++){let s=t.charAt(r);switch(s){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(s),e=!1;break;default:e&&(e=!1,s=s.toUpperCase()),n.push(s);break}}return n.join("")}var un=new Set(["constructor","toString","toJSON","valueOf"]),dn=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),Rt=t=>`${t}$`,mn=t=>dn.has(t)?Rt(t):t,ln=t=>un.has(t)?Rt(t):t;var Te=class{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=St(e)}addField(e){S(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}};var m=it("proto3",It(),pt(),Object.assign(Object.assign({},Nt()),{newFieldList(t){return new ge(t,fn)},initFields(t){for(let e of t.getType().fields.byMember()){if(e.opt)continue;let n=e.localName,r=t;if(e.repeated){r[n]=[];continue}switch(e.kind){case"oneof":r[n]={case:void 0};break;case"enum":r[n]=0;break;case"map":r[n]={};break;case"scalar":r[n]=Y(e.T,e.L);break;case"message":break}}}}));function fn(t){var e,n,r,s;let o=[],i;for(let a of typeof t=="function"?t():t){let c=a;if(c.localName=De(a.name,a.oneof!==void 0),c.jsonName=(e=a.jsonName)!==null&&e!==void 0?e:Ft(a.name),c.repeated=(n=a.repeated)!==null&&n!==void 0?n:!1,a.kind=="scalar"&&(c.L=(r=a.L)!==null&&r!==void 0?r:C.BIGINT),a.oneof!==void 0){let d=typeof a.oneof=="string"?a.oneof:a.oneof.name;(!i||i.name!=d)&&(i=new Te(d)),c.oneof=i,i.addField(c)}a.kind=="message"&&(c.delimited=!1),c.packed=(s=a.packed)!==null&&s!==void 0?s:a.kind=="enum"||a.kind=="scalar"&&a.T!=u.BYTES&&a.T!=u.STRING,o.push(c)}return o}var Bt=m.makeMessageType("youtube.component.ResponseContext",()=>[{no:6,name:"serviceTrackingParams",kind:"message",T:pn,repeated:!0}]),pn=m.makeMessageType("youtube.component.ServiceTrackingParam",()=>[{no:1,name:"service",kind:"scalar",T:5},{no:2,name:"params",kind:"message",T:gn,repeated:!0}]),gn=m.makeMessageType("youtube.component.Param",()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:9}]);var he=m.makeMessageType("youtube.component.FrameworkUpdateTransport",()=>[{no:1,name:"entityBatchUpdate",kind:"message",T:Tn}]),Tn=m.makeMessageType("youtube.component.EntityBatchUpdate",()=>[{no:1,name:"mutations",kind:"message",T:hn,repeated:!0}]),hn=m.makeMessageType("youtube.component.Mutation",()=>[{no:1,name:"entityKey",kind:"scalar",T:9},{no:2,name:"type",kind:"scalar",T:5},{no:3,name:"payload",kind:"message",T:yn}]),yn=m.makeMessageType("youtube.component.Payload",[]),Mo=m.makeMessageType("youtube.component.Entity",()=>[{no:2,name:"name",kind:"scalar",T:9},{no:4,name:"targetNo",kind:"scalar",T:5},{no:5,name:"type",kind:"scalar",T:5}]);var U=m.makeMessageType("youtube.component.Label",()=>[{no:1,name:"runs",kind:"message",T:$e,repeated:!0}]),$e=m.makeMessageType("youtube.component.Run",()=>[{no:1,name:"text",kind:"scalar",T:9}]);var Mt=m.makeMessageType("youtube.response.browse.Browse",()=>[{no:1,name:"responseContext",kind:"message",T:Bt},{no:9,name:"content",kind:"message",T:V},{no:10,name:"onResponseReceivedAction",kind:"message",T:V},{no:777,name:"frameworkUpdateTransport",kind:"message",T:he}]),V=m.makeMessageType("youtube.response.browse.Content",()=>[{no:58173949,name:"singleColumnResultsRenderer",kind:"message",T:bn},{no:153515154,name:"elementRenderer",kind:"message",T:Ot},{no:49399797,name:"sectionListRenderer",kind:"message",T:Ve}]),bn=m.makeMessageType("youtube.response.browse.SingleColumnResultsRenderer",()=>[{no:1,name:"tabs",kind:"message",T:kn,repeated:!0}]),kn=m.makeMessageType("youtube.response.browse.BrowseTabSupportedRenderer",()=>[{no:58174010,name:"tabRenderer",kind:"message",T:wn}]),wn=m.makeMessageType("youtube.response.browse.TabRenderer",()=>[{no:4,name:"content",kind:"message",T:V}]),Ve=m.makeMessageType("youtube.response.browse.SectionListRenderer",()=>[{no:1,name:"sectionListSupportedRenderers",kind:"message",T:xn,repeated:!0}]),xn=m.makeMessageType("youtube.response.browse.SectionListSupportedRenderer",()=>[{no:50195462,name:"itemSectionRenderer",kind:"message",T:Je},{no:51845067,name:"shelfRenderer",kind:"message",T:Un},{no:221496734,name:"musicDescriptionShelfRenderer",kind:"message",T:An}]),Je=m.makeMessageType("youtube.response.browse.ItemSectionRenderer",()=>[{no:1,name:"richItemContent",kind:"message",T:Ut,repeated:!0}]),Ut=m.makeMessageType("youtube.response.browse.RichItemContent",()=>[{no:153515154,name:"videoWithContextRenderer",kind:"message",T:Ot}]),Ot=m.makeMessageType("youtube.response.browse.ElementRenderer",()=>[{no:172660663,name:"videoRendererContent",kind:"message",T:In}]),In=m.makeMessageType("youtube.response.browse.VideoRendererContent",()=>[{no:1,name:"videoInfo",kind:"message",T:Nn},{no:2,name:"renderInfo",kind:"message",T:Bn}]),Nn=m.makeMessageType("youtube.response.browse.VideoInfo",()=>[{no:168777401,name:"videoContext",kind:"message",T:Sn}]),Sn=m.makeMessageType("youtube.response.browse.VideoContext",()=>[{no:5,name:"videoContent",kind:"message",T:Fn}]),Fn=m.makeMessageType("youtube.response.browse.VideoContent",()=>[{no:465160965,name:"timedLyricsRender",kind:"message",T:En}]),En=m.makeMessageType("youtube.response.browse.TimedLyricsRender",()=>[{no:4,name:"timedLyricsContent",kind:"message",T:Rn}]),Rn=m.makeMessageType("youtube.response.browse.TimedLyricsContent",()=>[{no:1,name:"runs",kind:"message",T:$e,repeated:!0},{no:2,name:"footerLabel",kind:"scalar",T:9}]),Bn=m.makeMessageType("youtube.response.browse.RenderInfo",()=>[{no:183314536,name:"layoutRender",kind:"message",T:Mn}]),Mn=m.makeMessageType("youtube.response.browse.LayoutRender",()=>[{no:1,name:"eml",kind:"scalar",T:9}]),Un=m.makeMessageType("youtube.response.browse.ShelfRenderer",()=>[{no:5,name:"richSectionContent",kind:"message",T:On}]),On=m.makeMessageType("youtube.response.browse.RichSectionContent",()=>[{no:51431404,name:"reelShelfRenderer",kind:"message",T:Cn}]),Cn=m.makeMessageType("youtube.response.browse.ReelShelfRenderer",()=>[{no:1,name:"richItemContent",kind:"message",T:Ut,repeated:!0}]),An=m.makeMessageType("youtube.response.browse.MusicDescriptionShelfRenderer",()=>[{no:3,name:"description",kind:"message",T:U},{no:10,name:"footer",kind:"message",T:U}]);var ye=m.makeMessageType("youtube.response.next.Next",()=>[{no:7,name:"content",kind:"message",T:Ln},{no:8,name:"onResponseReceivedAction",kind:"message",T:V},{no:777,name:"frameworkUpdateTransport",kind:"message",T:he}]),Ln=m.makeMessageType("youtube.response.next.Content",()=>[{no:51779735,name:"nextResult",kind:"message",T:Pn}]),Pn=m.makeMessageType("youtube.response.next.NextResult",()=>[{no:1,name:"content",kind:"message",T:V}]);var Ct=m.makeMessageType("youtube.response.search.Search",()=>[{no:4,name:"content",kind:"message",T:V},{no:7,name:"onResponseReceivedCommand",kind:"message",T:vn}]),vn=m.makeMessageType("youtube.response.search.OnResponseReceivedCommand",()=>[{no:50195462,name:"itemSectionRenderer",kind:"message",T:Je},{no:49399797,name:"appendContinuationItemsAction",kind:"message",T:Ve}]);var At=m.makeMessageType("youtube.response.shorts.Shorts",()=>[{no:2,name:"entries",kind:"message",T:Dn,repeated:!0}]),Dn=m.makeMessageType("youtube.response.shorts.Entry",()=>[{no:1,name:"command",kind:"message",T:$n}]),$n=m.makeMessageType("youtube.response.shorts.Command",()=>[{no:139608561,name:"reelWatchEndpoint",kind:"message",T:Vn}]),Vn=m.makeMessageType("youtube.response.shorts.ReelWatchEndpoint",()=>[{no:8,name:"overlay",kind:"message",T:Jn}]),Jn=m.makeMessageType("youtube.response.shorts.Overlay",()=>[{no:139970731,name:"reelPlayerOverlayRenderer",kind:"message",T:_n}]),_n=m.makeMessageType("youtube.response.shorts.ReelPlayerOverlayRenderer",()=>[{no:12,name:"style",kind:"scalar",T:5}]);var vt=m.makeMessageType("youtube.response.browse.Guide",()=>[{no:4,name:"items4",kind:"message",T:Lt,repeated:!0},{no:6,name:"items6",kind:"message",T:Lt,repeated:!0}]),Lt=m.makeMessageType("youtube.response.browse.Item",()=>[{no:117866661,name:"guideSectionRenderer",kind:"message",T:Gn}]),Gn=m.makeMessageType("youtube.response.browse.GuideSectionRenderer",()=>[{no:1,name:"rendererItems",kind:"message",T:Yn,repeated:!0}]),Yn=m.makeMessageType("youtube.response.browse.RendererItem",()=>[{no:318370163,name:"iconRender",kind:"message",T:Pt},{no:117501096,name:"labelRender",kind:"message",T:Pt}]),Pt=m.makeMessageType("youtube.response.browse.guideEntryRenderer",()=>[{no:1,name:"browseId",kind:"scalar",T:9}]);var be=m.makeMessageType("youtube.response.player.Player",()=>[{no:7,name:"adPlacements",kind:"message",T:qn,repeated:!0},{no:2,name:"playabilityStatus",kind:"message",T:Wn},{no:9,name:"playbackTracking",kind:"message",T:Qn},{no:10,name:"captions",kind:"message",T:Hn},{no:68,name:"adSlots",kind:"message",T:tr,repeated:!0}]),qn=m.makeMessageType("youtube.response.player.AdPlacement",()=>[{no:84813246,name:"adPlacementRenderer",kind:"message",T:Xn}]),Xn=m.makeMessageType("youtube.response.player.AdPlacementRenderer",()=>[{no:4,name:"params",kind:"scalar",T:9}]),Wn=m.makeMessageType("youtube.response.player.PlayabilityStatus",()=>[{no:21,name:"miniPlayer",kind:"message",T:jn},{no:11,name:"backgroundPlayer",kind:"message",T:_e}]),jn=m.makeMessageType("youtube.response.player.MiniPlayer",()=>[{no:151635310,name:"miniPlayerRender",kind:"message",T:Kn}]),_e=m.makeMessageType("youtube.response.player.BackgroundPlayer",()=>[{no:64657230,name:"backgroundPlayerRender",kind:"message",T:zn}]),Kn=m.makeMessageType("youtube.response.player.MiniPlayerRender",()=>[{no:1,name:"active",kind:"scalar",T:8}]),zn=m.makeMessageType("youtube.response.player.BackgroundPlayerRender",()=>[{no:1,name:"active",kind:"scalar",T:8}]),Qn=m.makeMessageType("youtube.response.player.PlaybackTracking",()=>[{no:1,name:"videostatsPlaybackUrl",kind:"message",T:J},{no:2,name:"videostatsDelayplayUrl",kind:"message",T:J},{no:3,name:"videostatsWatchtimeUrl",kind:"message",T:J},{no:4,name:"ptrackingUrl",kind:"message",T:J},{no:5,name:"qoeUrl",kind:"message",T:J},{no:13,name:"atrUrl",kind:"message",T:J},{no:15,name:"videostatsEngageUrl",kind:"message",T:J},{no:18,name:"pageadViewthroughconversion",kind:"message",T:J}]),J=m.makeMessageType("youtube.response.player.Tracking",()=>[{no:1,name:"baseUrl",kind:"scalar",T:9}]),Hn=m.makeMessageType("youtube.response.player.Captions",()=>[{no:51621377,name:"playerCaptionsTrackListRenderer",jsonName:"playerCaptionsTracklistRenderer",kind:"message",T:Zn}]),Zn=m.makeMessageType("youtube.response.player.PlayerCaptionsTrackListRenderer",()=>[{no:1,name:"captionTracks",kind:"message",T:Ge,repeated:!0},{no:2,name:"audioTracks",kind:"message",T:er,repeated:!0},{no:3,name:"translationLanguages",kind:"message",T:Ye,repeated:!0},{no:4,name:"defaultAudioTrackIndex",kind:"scalar",T:5,opt:!0},{no:6,name:"defaultCaptionTrackIndex",kind:"scalar",T:5,opt:!0}]),Ge=m.makeMessageType("youtube.response.player.CaptionTrack",()=>[{no:1,name:"baseUrl",kind:"scalar",T:9},{no:2,name:"name",kind:"message",T:U},{no:3,name:"vssId",kind:"scalar",T:9},{no:4,name:"languageCode",kind:"scalar",T:9},{no:5,name:"kind",kind:"scalar",T:9,opt:!0},{no:6,name:"rtl",kind:"scalar",T:8,opt:!0},{no:7,name:"isTranslatable",kind:"scalar",T:8}]),er=m.makeMessageType("youtube.response.player.AudioTrack",()=>[{no:2,name:"captionTrackIndices",kind:"scalar",T:5,repeated:!0,packed:!1},{no:3,name:"defaultCaptionTrackIndex",kind:"scalar",T:5,opt:!0},{no:4,name:"forcedCaptionTrackIndex",kind:"scalar",T:5,opt:!0},{no:5,name:"visibility",kind:"scalar",T:5,opt:!0},{no:6,name:"hasDefaultTrack",kind:"scalar",T:8,opt:!0},{no:7,name:"hasForcedTrack",kind:"scalar",T:8,opt:!0},{no:8,name:"audioTrackId",kind:"scalar",T:9,opt:!0},{no:11,name:"captionsInitialState",kind:"scalar",T:5,opt:!0}]),Ye=m.makeMessageType("youtube.response.player.TranslationLanguage",()=>[{no:1,name:"languageCode",kind:"scalar",T:9},{no:2,name:"languageName",kind:"message",T:U}]),tr=m.makeMessageType("youtube.response.player.AdSlot",()=>[{no:424701016,name:"render",kind:"message",T:nr}]),nr=m.makeMessageType("youtube.response.player.AdSlot.Render",[],{localName:"AdSlot_Render"});var $t=m.makeMessageType("youtube.response.setting.Setting",()=>[{no:6,name:"settingItems",kind:"message",T:ke,repeated:!0},{no:7,name:"CollectionItems",kind:"message",T:ke,repeated:!0}]),ke=m.makeMessageType("youtube.response.setting.SettingItem",()=>[{no:88478200,name:"backgroundPlayBackSettingRenderer",kind:"message",T:rr},{no:66930374,name:"settingCategoryCollectionRenderer",kind:"message",T:sr}]),rr=m.makeMessageType("youtube.response.setting.BackgroundPlayBackSettingRenderer",()=>[{no:1,name:"name",kind:"message",T:U},{no:2,name:"backgroundPlayback",kind:"scalar",T:8},{no:3,name:"download",kind:"scalar",T:8},{no:5,name:"trackingParams",kind:"scalar",T:12},{no:9,name:"downloadQualitySelection",kind:"scalar",T:8},{no:10,name:"smartDownload",kind:"scalar",T:8},{no:14,name:"icon",kind:"message",T:Vt}]),sr=m.makeMessageType("youtube.response.setting.SettingCategoryCollectionRenderer",()=>[{no:2,name:"name",kind:"message",T:U},{no:3,name:"subSettings",kind:"message",T:qe,repeated:!0},{no:4,name:"categoryId",kind:"scalar",T:5},{no:5,name:"icon",kind:"message",T:Vt}]),Vt=m.makeMessageType("youtube.response.setting.Icon",()=>[{no:1,name:"iconType",kind:"scalar",T:5}]),qe=m.makeMessageType("youtube.response.setting.SubSetting",()=>[{no:61331416,name:"settingBooleanRenderer",kind:"message",T:or}]),or=m.makeMessageType("youtube.response.setting.SettingBooleanRenderer",()=>[{no:2,name:"title",kind:"message",T:U},{no:3,name:"description",kind:"message",T:U},{no:5,name:"enableServiceEndpoint",kind:"message",T:Dt},{no:6,name:"disableServiceEndpoint",kind:"message",T:Dt},{no:15,name:"itemId",kind:"scalar",T:5}]),Dt=m.makeMessageType("youtube.response.setting.ServiceEndpoint",()=>[{no:81212182,name:"setClientSettingEndpoint",kind:"message",T:ir}]),ir=m.makeMessageType("youtube.response.setting.SetClientSettingEndpoint",()=>[{no:1,name:"settingData",kind:"message",T:ar}]),ar=m.makeMessageType("youtube.response.setting.SettingData",()=>[{no:1,name:"clientSettingEnum",kind:"message",T:cr},{no:3,name:"boolValue",kind:"scalar",T:8}]),cr=m.makeMessageType("youtube.response.setting.ClientSettingEnum",()=>[{no:1,name:"item",kind:"scalar",T:5}]);var Jt=m.makeMessageType("youtube.response.watch.Watch",()=>[{no:1,name:"contents",kind:"message",T:ur,repeated:!0}]),ur=m.makeMessageType("youtube.response.watch.Content",()=>[{no:2,name:"player",kind:"message",T:be},{no:3,name:"next",kind:"message",T:ye}]);var hi=m.makeMessageType("youtube.response.frameworkUpdate.FrameworkUpdateTransport",()=>[{no:1,name:"entityBatchUpdate",kind:"message",T:dr}]),dr=m.makeMessageType("youtube.response.frameworkUpdate.EntityBatchUpdate",()=>[{no:1,name:"mutations",kind:"message",T:mr,repeated:!0}]),mr=m.makeMessageType("youtube.response.frameworkUpdate.Mutation",()=>[{no:1,name:"entityKey",kind:"scalar",T:9},{no:2,name:"type",kind:"scalar",T:5},{no:3,name:"payload",kind:"message",T:lr}]),lr=m.makeMessageType("youtube.response.frameworkUpdate.Payload",[]),_t=m.makeMessageType("youtube.response.frameworkUpdate.Entity",()=>[{no:2,name:"name",kind:"scalar",T:9},{no:4,name:"targetNo",kind:"scalar",T:5},{no:5,name:"type",kind:"scalar",T:5}]);var K=class{_times=new Map;name;isDebug;className;request;response;constructor(e,n,r){this.name=e??"",this.isDebug=r?.debug??!1,e&&this.debug(`${e} Start`),this.className=n??"",this.init()}static getInstance(e,n){let r="Surge";return typeof $loon<"u"?r="Loon":typeof $task<"u"&&(r="QuanX"),K.instances[r]||(K.instances[r]=K.classNames[r](e,r,n)),K.instances[r]}createProxy(e){return new Proxy(e,{get:this.getFn,set:this.setFn})}getFn(e,n,r){return e[n]}setFn(e,n,r,s){return e[n]=r,!0}getJSON(e,n={}){let r=this.getVal(e);return r?JSON.parse(r):n}setJSON(e,n){this.setVal(JSON.stringify(e),n)}msg(e=this.name,n="",r="",s){}debug(e){this.isDebug&&(typeof e=="object"&&(e=JSON.stringify(e)),console.log(e))}log(e){typeof e=="object"&&(e=JSON.stringify(e)),console.log(e)}timeStart(e){this._times.set(e,Date.now())}timeEnd(e){if(this._times.has(e)){let n=this._times.get(e)??0,r=Date.now()-n;this.debug(`${e}: ${r}ms`),this._times.delete(e)}else this.debug(`Timer with label ${e} does not exist.`)}exit(){$done({})}reject(){$done()}decodeParams(e){return e}},$=K;G($,"instances",{}),G($,"classNames",{QuanX:(e,n,r)=>new we(e,n,r),Surge:(e,n,r)=>new te(e,n,r),Loon:(e,n,r)=>new Xe(e,n,r)});var xe=class extends ${getFn(e,n,r){let s=xe.clientAdapter[n]||n;return super.getFn(e,s,r)}setFn(e,n,r,s){let o=xe.clientAdapter[n]||n;return super.setFn(e,o,r,s)}init(){try{this.request=this.createProxy($request),this.response=this.createProxy($response)}catch(e){this.debug(e.toString())}}getVal(e){return $persistentStore.read(e)}setVal(e,n){$persistentStore.write(e,n)}msg(e=this.name,n="",r="",s){$notification.post(e,n,r,{url:s??""})}async fetch(e){return await new Promise((n,r)=>{let{method:s,body:o,bodyBytes:i,...a}=e,c=i??o,d=c instanceof Uint8Array;$httpClient[s.toLowerCase()]({...a,body:c,"binary-mode":d},(l,p,g)=>{l&&r(l);let f=d?"bodyBytes":"body";n({status:p.status||p.statusCode,headers:p.headers,[f]:g})})})}done(e){let n=e.response??e,r,s;n.bodyBytes?(r=n.bodyBytes,delete n.bodyBytes,s={...e},s.response?s.response.body=r:s.body=r):s=e,$done(s)}decodeParams(e){return typeof $argument=="string"&&!$argument.includes("{{{")&&Object.assign(e,JSON.parse($argument)),e}},te=xe;G(te,"clientAdapter",{bodyBytes:"body"});var D=class extends ${static transferBodyBytes(e,n){return e instanceof ArrayBuffer?n==="Uint8Array"?new Uint8Array(e):e:e instanceof Uint8Array&&n==="ArrayBuffer"?e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset):e}init(){try{this.request=this.createProxy($request),this.response=this.createProxy($response)}catch(e){this.debug(e.toString())}}getFn(e,n,r){let s=D.clientAdapter[n]||n,o=super.getFn(e,s,r);return n==="bodyBytes"&&(o=D.transferBodyBytes(o,"Uint8Array")),o}setFn(e,n,r,s){let o=D.clientAdapter[n]||n,i=r;return n==="bodyBytes"&&(i=D.transferBodyBytes(i,"Uint8Array")),super.setFn(e,o,i,s)}getVal(e){return $prefs.valueForKey(e)?.replace(/\0/g,"")}setVal(e,n){$prefs.setValueForKey(e,n)}msg(e=this.name,n="",r="",s){$notify(e,n,r,{"open-url":s??""})}async fetch(e){return await new Promise(n=>{let r={url:"",method:"GET"};for(let[s,o]of Object.entries(e))s==="id"?r.sessionIndex=o:s==="bodyBytes"?r.bodyBytes=D.transferBodyBytes(o,"ArrayBuffer"):r[s]=o;e.bodyBytes&&delete r.body,$task.fetch(r).then(s=>{let o={status:200,headers:{}};for(let[i,a]of Object.entries(s))i==="sessionIndex"?o.id=a:i==="bodyBytes"?o.bodyBytes=D.transferBodyBytes(a,"Uint8Array"):i==="statusCode"?o.status=a:o[i]=a;n(o)})})}done(e){let n=e.response??e,r={};for(let[s,o]of Object.entries(n))s==="status"?r.status=`HTTP/1.1 ${o}`:s==="bodyBytes"?r.bodyBytes=D.transferBodyBytes(o,"ArrayBuffer"):r[s]=o;$done(r)}},we=D;G(we,"clientAdapter",{id:"sessionIndex",status:"statusCode"});var Xe=class extends te{decodeParams(e){if(typeof $argument<"u")for(let n of Object.keys(e)){let r=$argument?.[n];r!==void 0&&(e[n]=r)}return e}};var h=$.getInstance("YouTube");var L=class{name;needProcess;needSave;message;version="1.0";whiteNo=[];blackNo=[];whiteEml=[];blackEml=["inline_injection_entrypoint_layout.eml"];msgType;argument;decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0});constructor(e,n){this.name=n,this.msgType=e,this.argument=this.decodeArgument(),h.isDebug=Boolean(this.argument.debug),h.debug(this.name);let r=h.getJSON("YouTubeAdvertiseInfo");h.debug(`currentVersion:  ${this.version}`),h.debug(`storedVersion:  ${r.version}`),r?.version===this.version&&Object.assign(this,r)}setLyricFound(e){this.constructor.sharedLyricFound=e}isLyricFound(){return this.constructor.sharedLyricFound}decodeArgument(){let e={lyricLang:"zh-Hans",captionLang:"zh-Hans",blockUpload:!0,blockImmersive:!0,debug:!1};return h.decodeParams(e)}fromBinary(e){return e instanceof Uint8Array?(this.message=this.msgType.fromBinary(e),h.debug(`raw: ${Math.floor(e.length/1024)} kb`),this):(h.log("YouTube can not get binaryBody"),h.exit(),this)}async modify(){let e=this.pure();return e instanceof Promise?await e:e}toBinary(){return this.message.toBinary()}listUnknownFields(e){return e instanceof E?e.getType().runtime.bin.listUnknownFields(e):[]}save(){if(this.needSave){h.debug("Update Config");let e={version:this.version,whiteNo:this.whiteNo,blackNo:this.blackNo,whiteEml:this.whiteEml,blackEml:this.blackEml};h.debug(e),h.setJSON(e,"YouTubeAdvertiseInfo")}}done(){if(this.save(),this.needProcess){h.timeStart("toBinary");let e=this.toBinary();h.timeEnd("toBinary"),h.debug(`modify: ${Math.floor(e.length/1024)} kb`),h.done({bodyBytes:e})}h.debug("use $done({})"),h.exit()}iterate(e={},n,r){let s=typeof e=="object"?[e]:[];for(;s.length;){let o=s.pop(),i=Object.keys(o);for(let a of i)a===n?r(o,s):typeof o[a]=="object"&&s.push(o[a])}}isAdvertise(e){let n=this.listUnknownFields(e)[0];return n?this.handleFieldNo(n):this.handleFieldEml(e)}handleFieldNo(e){let n=e.no;if(this.whiteNo.includes(n))return!1;if(this.blackNo.includes(n))return!0;let r=this.checkBufferIsAd(e);return r?this.blackNo.push(n):this.whiteNo.push(n),this.needSave=!0,r}handleFieldEml(e){let n=!1,r="";return this.iterate(e,"renderInfo",(s,o)=>{if(r=s.renderInfo.layoutRender.eml.split("|")[0],this.whiteEml.includes(r))n=!1;else if(this.blackEml.includes(r)||/shorts(?!_pivot_item)/.test(r))n=!0;else{let i=s?.videoInfo?.videoContext?.videoContent;i&&(n=this.checkUnknownFiled(i),n?this.blackEml.push(r):this.whiteEml.push(r),this.needSave=!0)}o.length=0}),n}checkBufferIsAd(e){return!e||e.data.length<1e3?!1:this.decoder.decode(e.data).includes("pagead")}checkUnknownFiled(e){return e?this.listUnknownFields(e)?.some(r=>this.checkBufferIsAd(r))??!1:!1}isShorts(e){let n=!1;return this.iterate(e,"eml",(r,s)=>{n=/shorts(?!_pivot_item)/.test(r.eml),s.length=0}),n}};G(L,"sharedLyricFound",!1);function fr(t){let r=".",s="+-a^+6",o="+-3^+b+-f",i,a,c;for(i=[],a=0,c=0;c<t.length;c++){let d=t.charCodeAt(c);128>d?i[a++]=d:(2048>d?i[a++]=d>>6|192:((d&64512)==55296&&c+1<t.length&&(t.charCodeAt(c+1)&64512)==56320?(d=65536+((d&1023)<<10)+(t.charCodeAt(++c)&1023),i[a++]=d>>18|240,i[a++]=d>>12&63|128):i[a++]=d>>12|224,i[a++]=d>>6&63|128),i[a++]=d&63|128)}for(t=406644,a=0;a<i.length;a++)t+=i[a],t=Gt(t,s);return t=Gt(t,o),t^=3293161072,0>t&&(t=(t&2147483647)+2147483648),t%=1e6,t.toString()+r+(t^406644)}function Gt(t,e){let n="a",r="+",s;for(let o=0;o<e.length-2;o+=3)s=e.charAt(o+2),s=s>=n?s.charCodeAt(0)-87:Number(s),s=e.charAt(o+1)==r?t>>>s:t<<s,t=e.charAt(o)==r?t+s&4294967295:t^s;return t}function Yt(t,e){return`https://translate.google.com/translate_a/single?client=gtx&sl=auto&tl=${e}&hl=en&dt=at&dt=bd&dt=ex&dt=ld&dt=md&dt=qca&dt=rw&dt=rm&dt=ss&dt=t&source=bh&ssel=0&tsel=0&kc=1&tk=${fr(t)}&q=${encodeURIComponent(t)}`}var z=class extends L{constructor(e=Mt,n="Browse"){super(e,n)}async pure(){let e=h.isDebug;return this.iterate(this.message,"sectionListSupportedRenderers",n=>{for(let r=n.sectionListSupportedRenderers.length-1;r>=0;r--)this.removeCommonAD(n,r),this.removeShorts(n,r)}),e&&console.log("TTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTT Call translate()"),await this.translate(),this}removeCommonAD(e,n){let s=e.sectionListSupportedRenderers[n]?.itemSectionRenderer?.richItemContent;for(let o=s?.length-1;o>=0;o--)this.isAdvertise(s[o])&&(s.splice(o,1),this.needProcess=!0)}removeShorts(e,n){let r=e.sectionListSupportedRenderers[n]?.shelfRenderer;this.isShorts(r)&&(e.sectionListSupportedRenderers.splice(n,1),this.needProcess=!0)}getBrowseId(){let e="";return this.iterate(this.message?.responseContext,"key",(n,r)=>{n.key==="browse_id"&&(e=n.value,r.length=0)}),e}async translate(){let e=h.isDebug,n=this.argument.lyricLang?.trim();if(e&&console.log("TTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTT translate () Enter,lyricTargetLang: "+n+" this.name: "+this.name+" Id: "+this.getBrowseId()),this.name!=="Browse"||n==="off")return;let r="",s,o=!1;if(this.iterate(this.message,"timedLyricsContent",(d,l)=>{s=d.timedLyricsContent,r=d.timedLyricsContent.runs.map(p=>p.text).join(`
`),o=!0,l.length=0}),e&&console.log("TTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTT this.message = "+JSON.stringify(this.message,null,2)),o||this.iterate(this.message,"description",(d,l)=>{s=d.description.runs[0],r=d.description.runs[0].text,l.length=0,o=!0}),this.setLyricFound(o),e&&console.log("TTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTT translate Enter flag:"+o),!o)return;let i=n.split("-")[0],a=Yt(r,n),c=await h.fetch({method:"GET",url:a});if(c.status===200&&c.body){let d=JSON.parse(c.body),l=" & Translated by Google",p=d[2].includes(i);s.text?(e&&console.log("TTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTT translate resp:200,tempObj.text:true"),s.text=d[0].map(g=>p?g[0]:g[1]+g[0]||"").join(`\r
`),this.iterate(this.message,"footer",(g,f)=>{g.footer.runs[0].text+=l,f.length=0})):(e&&console.log("TTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTT translate resp:200,tempObj.text:false"),s.runs.length<=d[0].length&&(s.runs.forEach((g,f)=>{g.text=p?d[0][f][0]:g.text+`
${d[0][f][0]}`}),s.footerLabel+=l)),this.needProcess=!0}}removeFrameworkUpdateAd(){let e=this.message?.frameworkUpdateTransport?.entityBatchUpdate?.mutations;if(e)for(let n=e.length-1;n>=0;n--){let r=e[n],s=_t.fromBinary(j.dec(decodeURIComponent(r.entityKey))),o=this.blackEml.includes(s.name);!o&&this.checkUnknownFiled(r?.payload)&&(o=!0,this.blackEml.push(s.name),this.needSave=!0),o&&(e.splice(n,1),this.needProcess=!0)}}},ne=class extends z{constructor(e=ye,n="Next"){super(e,n)}},re=class extends L{constructor(e=be,n="Player"){super(e,n)}pure(){let e=h.isDebug,n=!1;return this.message.adPlacements?.length&&(this.message.adPlacements.length=0),this.message.adSlots?.length&&(this.message.adSlots.length=0),delete this.message?.playbackTracking?.pageadViewthroughconversion,this.addPlayAbility(),n=this.isLyricFound(),e&&console.log("00000000000000000000000000000000000000000 lyricFound:"+n),n&&this.addTranslateCaption(),this.needProcess=!0,this}addPlayAbility(){let e=this.message?.playabilityStatus?.miniPlayer?.miniPlayerRender;typeof e=="object"&&(e.active=!0),typeof this.message.playabilityStatus=="object"&&(this.message.playabilityStatus.backgroundPlayer=new _e({backgroundPlayerRender:{active:!0}}))}addTranslateCaption(){let e=h.isDebug,n=!1,r=this.argument.captionLang,s;if(h.className.match("Loon")&&(n=!0),e&&console.log("111111111111111111111111111111111111111111111 Current Client is "+h.className+" isLoon:"+n),n?s=r.split("+"):s=r.toString().split(","),e){console.log("8888888888888888888888888888888888888888888888 captionTargetLang_org:"+r),console.log("8888888888888888888888888888888888888888888888 captionTargetLang:"+s+" length:"+s.length);for(let i=0;i<s.length;i++)console.log("Test captionTargetLang: "+i+" ->"+s[i])}let o=s&&s.length>0?s[s.length-1]:"zh-Hans";o!=="off"&&this.iterate(this.message,"captionTracks",(i,a)=>{let c=i.captionTracks,d=i.audioTracks;if(Array.isArray(c)){let p={[o]:2};if(e){console.log("66666666666666666666666666666666666666 defaultLan:"+o);for(let T in p)p.hasOwnProperty(T)&&console.log("66666666666666666666666666666666666666 captionPriority:"+T+": "+p[T])}let g=-1,f=0;for(let T=0;T<c.length;T++){let x=c[T],y=p[x.languageCode];e&&console.log("7777777777777777777777777777777777captionTracks :"+T+" languageCode:"+x.languageCode+" currentPriority:"+y),y&&y>g&&(g=y,f=T),x.isTranslatable=!0}if(g!==2){f=c.length-1,e&&console.log("99999999999999999999999999999999999 newtargetIndex ="+f+" org captionTracks.length="+c.length);for(let T=0;T<s.length;T++){let x=new Ge({baseUrl:c[f].baseUrl+`&tlang=${s[T]}`,name:{runs:[{text:`@Enhance (${s[T]})`}]},vssId:`.${s[T]}`,languageCode:s[T]});c.push(x)}}if(e&&console.log("0000000000000000000000000000000000000000000captionTracks.length :"+c.length),Array.isArray(d)){let T=g===2?f:c.length-1;for(let x of d){if(g!=2)for(let y=f+1;y<c.length;y++)x.captionTrackIndices?.includes(y)||x.captionTrackIndices.push(y);x.defaultCaptionTrackIndex=T,x.captionsInitialState=3}}}let l={de:"Deutsch",ru:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439",fr:"Fran\xE7ais",fil:"Filipino",ko:"\uD55C\uAD6D\uC5B4",ja:"\u65E5\u672C\u8A9E",en:"English",vi:"Ti\u1EBFng Vi\u1EC7t","zh-Hant":"\u4E2D\u6587\uFF08\u7E41\u9AD4\uFF09","zh-Hans":"\u4E2D\u6587\uFF08\u7B80\u4F53\uFF09",und:"@VirgilClyne"};i.translationLanguages=Object.entries(l).map(([p,g])=>new Ye({languageCode:p,languageName:{runs:[{text:g}]}})),a.length=0})}},Ie=class extends z{constructor(e=Ct,n="Search"){super(e,n)}},Ne=class extends L{constructor(e=At,n="Shorts"){super(e,n)}pure(){let e=this.message.entries?.length;if(e)for(let n=e-1;n>=0;n--)this.message.entries[n].command?.reelWatchEndpoint?.overlay||(this.message.entries.splice(n,1),this.needProcess=!0);return this}},Se=class extends L{constructor(e=vt,n="Guide"){super(e,n)}pure(){let e=["SPunlimited"];return this.argument.blockUpload&&e.push("FEuploads"),this.argument.blockImmersive&&e.push("FEmusic_immersive"),this.iterate(this.message,"rendererItems",n=>{for(let r=n.rendererItems.length-1;r>=0;r--){let s=n.rendererItems[r]?.iconRender?.browseId||n.rendererItems[r]?.labelRender?.browseId;e.includes(s)&&(n.rendererItems.splice(r,1),this.needProcess=!0)}}),this}},Fe=class extends L{constructor(e=$t,n="Setting"){super(e,n)}pure(){this.iterate(this.message.settingItems,"categoryId",n=>{if(n.categoryId===10135){let r=new qe({settingBooleanRenderer:{itemId:0,enableServiceEndpoint:{setClientSettingEndpoint:{settingData:{clientSettingEnum:{item:151},boolValue:!0}}},disableServiceEndpoint:{setClientSettingEndpoint:{settingData:{clientSettingEnum:{item:151},boolValue:!1}}}}});n.subSettings.push(r)}});let e=new ke({backgroundPlayBackSettingRenderer:{backgroundPlayback:!0,download:!0,downloadQualitySelection:!0,smartDownload:!0,icon:{iconType:1093}}});return this.message.settingItems.push(e),this.needProcess=!0,this}},Ee=class extends L{player;next;constructor(e=Jt,n="Watch"){super(e,n),this.player=new re,this.next=new ne}async pure(){for(let e of this.message.contents)e.player&&(this.player.message=e.player,await this.player.pure()),e.next&&(this.next.message=e.next,await this.next.pure()),this.needProcess=!0;return this}};var pr=new Map([["browse",z],["next",ne],["player",re],["search",Ie],["reel_watch_sequence",Ne],["guide",Se],["get_setting",Fe],["get_watch",Ee]]);function We(t){for(let[e,n]of pr.entries())if(t.includes(e))return new n;return null}async function gr(){let t=We(h.request.url);if(t){let e=h.response.bodyBytes;h.timeStart("fromBinary"),t.fromBinary(e),h.timeEnd("fromBinary"),h.timeStart("modify"),await t.modify(),h.timeEnd("modify"),t.done()}else h.msg("YouTube Enhance","\u811A\u672C\u9700\u8981\u66F4\u65B0","\u5916\u90E8\u8D44\u6E90 -> \u5168\u90E8\u66F4\u65B0"),h.exit()}gr().catch(t=>{h.log(t.toString())}).finally(()=>{h.exit()});})();
